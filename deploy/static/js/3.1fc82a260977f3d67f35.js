webpackJsonp([3],{"5aCZ":function(t,e,i){"use strict";var n=i("//Fk"),a=i.n(n),l=i("fZjL"),s=i.n(l),o={name:"editorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{uploadUrl:"http://api.newtaike.com/rest/upload",dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return s()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=s()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(console.log(e),this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,n=s()(this.listObj),a=0,l=n.length;a<l;a++)if(this.listObj[n[a]].uid===i)return this.listObj[n[a]].url=t.result,void(this.listObj[n[a]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=s()(this.listObj),n=0,a=i.length;n<a;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new a.a(function(a,l){var s=new Image;s.src=i.createObjectURL(t),s.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{action:t.uploadUrl,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var c=["advlist anchor autolink code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],d=["bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap\t preview anchor pagebreak fullscreen insertdatetime media table emoticons forecolor backcolor"],u={name:"tinymce",components:{editorImage:i("VU/8")(o,r,!1,function(t){i("9+rS")},"data-v-53d43213",null).exports},props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t)})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#"+this.tinymceId,height:this.height,language:"zh_CN",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:this.menubar,plugins:c,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="http://api.newtaike.com/'+t.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},staticRenderFns:[]};var h=i("VU/8")(u,p,!1,function(t){i("dJPl")},"data-v-c81b1a7c",null);e.a=h.exports},"9+rS":function(t,e,i){var n=i("bdcu");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("3ce6dd66",n,!0)},XbZC:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.tinymce-container[data-v-c81b1a7c] {\n  position: relative;\n}\n.tinymce-container[data-v-c81b1a7c] .mce-fullscreen {\n  z-index: 10000;\n}\n.tinymce-textarea[data-v-c81b1a7c] {\n  visibility: hidden;\n  z-index: -1;\n}\n.editor-custom-btn-container[data-v-c81b1a7c] {\n  position: absolute;\n  right: 4px;\n  top: 4px;\n  /*z-index: 2005;*/\n}\n.editor-upload-btn[data-v-c81b1a7c] {\n  display: inline-block;\n}\n",""])},bdcu:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.upload-container .editor-slide-upload[data-v-53d43213] {\n  margin-bottom: 20px;\n}\n",""])},cAgV:function(t,e,i){"use strict";var n=i("woOf"),a=i.n(n),l=(i("ctMr"),{bind:function(t,e){t.addEventListener("click",function(i){var n=a()({},e.value),l=a()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=l.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var o=s.getBoundingClientRect(),r=s.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":((r=document.createElement("span")).className="waves-ripple",r.style.height=r.style.width=Math.max(o.width,o.height)+"px",s.appendChild(r)),l.type){case"center":r.style.top=o.height/2-r.offsetHeight/2+"px",r.style.left=o.width/2-r.offsetWidth/2+"px";break;default:r.style.top=i.pageY-o.top-r.offsetHeight/2-document.body.scrollTop+"px",r.style.left=i.pageX-o.left-r.offsetWidth/2-document.body.scrollLeft+"px"}return r.style.backgroundColor=l.color,r.className="waves-ripple z-active",!1}},!1)}}),s=function(t){t.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(s)),l.install=s;e.a=l},ctMr:function(t,e,i){var n=i("z4F4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("a7c9def6",n,!0)},czlE:function(t,e,i){var n=i("eivM");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("2ecbe1fd",n,!0)},dJPl:function(t,e,i){var n=i("XbZC");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("a06d04f4",n,!0)},eivM:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n",""])},pEiX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),a=i.n(n),l=i("5aCZ"),s=i("L9TO"),o=i("cAgV"),r=(i("0xDb"),0),c={name:"newsTable",directives:{waves:o.a},components:{Tinymce:l.a},data:function(){return{uploadUrl:"http://api.newtaike.com/rest/upload",tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,limit:20,title:void 0,showIndex:void 0},temp:{id:void 0,gmtCreate:"",title:"",detail:"",type:"",logo:null},editTemp:{id:void 0,gmtCreate:"",title:"",detail:"",type:"",logo:null},dialogFormVisible:!1,dialogDetailVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"添加",detail:"查看"},typeOptions:[{key:"COMPANY",value:"公司新闻"},{key:"INDUSTRY",value:"行业动态"},{key:"TECH",value:"技术百科"}],rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}],detail:[{required:!0,message:"详情不能为空",trigger:"change"}],logo:[{required:!0,message:"图片不能为空",trigger:"change"}]}}},filters:{typeFilter:function(t){return{COMPANY:"success",INDUSTRY:"danger",TECH:"info"}[t]},typeValueFilter:function(t){return{COMPANY:"公司新闻",INDUSTRY:"行业动态",TECH:"技术百科"}[t]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(s.b)(this.listQuery).then(function(e){t.list=e.data.data,t.total=e.data.count,t.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},handleUploadSuccess:function(t,e){this.temp.logo="http://api.newtaike.com/"+t.result},resetTemp:function(){this.temp={id:void 0,gmtCreate:"",title:"",detail:"",type:"",logo:null}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){r>0&&t.$refs.editorTiny.setContent(t.temp.detail),t.$refs.dataForm.clearValidate()})},createDataCancel:function(){this.dialogFormVisible=!1},editDataCancel:function(){this.dialogFormVisible=!1},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&Object(s.a)(t.temp).then(function(e){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})},handleDetail:function(t){this.editTemp=a()({},t),this.dialogStatus="detail",this.dialogDetailVisible=!0},handleUpdate:function(t){var e=this;this.temp=a()({},t),""==this.temp.logo?this.temp.logo=null:this.temp.logo="http://api.newtaike.com/"+this.temp.logo,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){r>0&&e.$refs.editorTiny.setContent(t.detail),e.$refs.dataForm.clearValidate(),r++})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var i=a()({},t.temp);Object(s.d)(i).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})}})},handleDelete:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.c)(t.id).then(function(){var i=e.list.indexOf(t);e.list.splice(i,1),e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:t.$t("table.title")},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(t._s(t.$t("table.search")))]),t._v(" "),i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",type:"index",width:"65"}}),t._v(" "),i("el-table-column",{attrs:{width:"160px",align:"center",label:t.$t("table.gmtCreate")},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.gmtCreate))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"150px",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){t.handleUpdate(e.row)}}},[t._v(t._s(e.row.title))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"110px",align:"center",label:"新闻详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type",on:{click:function(i){t.handleDetail(e.row)}}},[t._v("查看")])]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"类型名称",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("typeFilter")(e.row.type)}},[t._v(t._s(t._f("typeValueFilter")(e.row.type)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:t.$t("table.actions"),width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.handleUpdate(e.row)}}},[t._v(t._s(t.$t("table.edit")))]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.handleDelete(e.row)}}},[t._v(t._s(t.$t("table.delete"))+"\n        ")])]}}])})],1),t._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[5,10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,top:"5vh",width:"80%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",staticClass:"form-container",staticStyle:{width:"80%","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"90px"}},[i("el-form-item",{attrs:{label:"图片",prop:"logo"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,"on-success":t.handleUploadSuccess}},[t.temp.logo?i("img",{staticClass:"avatar",attrs:{width:300,src:t.temp.logo}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"新闻类型",prop:"type"}},[i("el-select",{ref:"typeSelect",staticClass:"filter-item",attrs:{placeholder:"请选择"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},t._l(t.typeOptions,function(t){return i("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{model:{value:t.temp.title,callback:function(e){t.$set(t.temp,"title",e)},expression:"temp.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"详情",prop:"detail"}},[i("div",{staticClass:"editor-container"},[i("tinymce",{ref:"editorTiny",attrs:{height:260},model:{value:t.temp.detail,callback:function(e){t.$set(t.temp,"detail",e)},expression:"temp.detail"}})],1)])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.createDataCancel}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v(t._s(t.$t("table.confirm")))]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v(t._s(t.$t("table.confirm")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogDetailVisible,top:"5vh",width:"80%"},on:{"update:visible":function(e){t.dialogDetailVisible=e}}},[i("el-form",{ref:"detailForm",staticClass:"form-container",staticStyle:{width:"80%","margin-left":"50px"},attrs:{model:t.editTemp,"label-position":"left","label-width":"90px"}},[i("span",{domProps:{innerHTML:t._s(t.editTemp.detail)}})]),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogDetailVisible=!1}}},[t._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(t){i("czlE")},null,null);e.default=u.exports},z4F4:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}",""])}});